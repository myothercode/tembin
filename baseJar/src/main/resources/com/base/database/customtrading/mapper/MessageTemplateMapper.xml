<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.base.database.customtrading.mapper.MessageTemplateMapper">
  <resultMap id="BaseResultMap" type="com.base.domains.querypojos.MessageTemplateQuery">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <id column="id" property="id" jdbcType="BIGINT" />
      <result column="name" property="name" jdbcType="VARCHAR" />
      <result column="content" property="content" jdbcType="LONGVARCHAR" />
      <result column="status" property="status" jdbcType="INTEGER" />
      <result column="caseType" property="casetype" jdbcType="INTEGER" />
      <result column="autoType" property="autotype" jdbcType="INTEGER" />
      <result column="messageType" property="messagetype" jdbcType="INTEGER" />
      <result column="create_user" property="createUser" jdbcType="BIGINT" />
      <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
      <result column="uuid" property="uuid" jdbcType="VARCHAR" />
  </resultMap>

    <select id="selectMessageTemplateList" resultMap="BaseResultMap" parameterType="map">
        select template.id,template.name,template.caseType,template.autoType,template.messageType,template.status from trading_message_template template  where 1=1
        <if test="id!=null">
            and template.id = #{id}
        </if>
        <if test="status!=null">
            and template.status = #{status}
        </if>

        <if test="type!=null">
            <if test="type=='caseType'">
                and template.caseType=1
            </if>
            <if test="type=='autoType'">
                and template.autoType=1
            </if>
            <if test="type=='messageType'">
                and template.messageType=1
            </if>
        </if>
        <if test="orgUsers!=null">
            and template.create_user in
            <foreach collection="orgUsers" item="user" index="index" open="(" separator="," close=")">
                #{user.userId}
            </foreach>
        </if>
        <if test="orderby!=null">
            <if test="orderby=='asc'">
                order by template.caseType asc,template.autoType asc,template.messageType asc
            </if>
            <if test="orderby=='desc'">
                order by template.caseType DESC,template.autoType DESC,template.messageType DESC
            </if>
        </if>
        <if test="orderby==null">
            order by template.id DESC
        </if>
    <!--    <if test="ebays!=null">
            and addmembermessage.sender in
            <foreach collection="ebays" item="ebay" index="index" open="(" separator="," close=")">
                #{ebay.ebayName}
            </foreach>
        </if>-->
    </select>

</mapper>