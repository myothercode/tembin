<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.base.database.customtrading.mapper.MessageAddmymessageMapper">
  <resultMap id="BaseResultMap" type="com.base.domains.querypojos.MessageAddmymessageQuery">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <id column="id" jdbcType="BIGINT" property="id" />
      <result column="itemID" jdbcType="VARCHAR" property="itemid" />
      <result column="messageID" jdbcType="VARCHAR" property="messageid" />
      <result column="emailCopyToSender" jdbcType="VARCHAR" property="emailcopytosender" />
      <result column="displayToPublic" jdbcType="VARCHAR" property="displaytopublic" />
      <result column="sender" jdbcType="VARCHAR" property="sender" />
      <result column="recipientID" jdbcType="VARCHAR" property="recipientid" />
      <result column="subject" jdbcType="LONGVARCHAR" property="subject" />
      <result column="body" jdbcType="LONGVARCHAR" property="body" />
      <result column="parentMessageID" jdbcType="VARCHAR" property="parentmessageid" />
      <result column="replied" jdbcType="VARCHAR" property="replied" />
      <result column="create_user" jdbcType="BIGINT" property="createUser" />
      <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
      <result column="countNum" property="countNum" jdbcType="BIGINT" />
  </resultMap>


    <select id="selectMessageGetmymessageByGroupList" resultMap="BaseResultMap" parameterType="map">
        select addmembermessage.*,count(*) countNum from trading_message_addmembermessage addmembermessage  where 1=1
        <if test="id!=null">
            and addmembermessage.id = #{id}
        </if>
        <if test="replied!=null">
            and addmembermessage.replied=#{replied}
        </if>
        <if test="starttime!=null">
            and addmembermessage.create_time >= #{starttime}
        </if>
        <if test="endtime!=null">
            and addmembermessage.create_time &lt; #{endtime}
        </if>
        <if test="ebays!=null">
            and addmembermessage.sender in
            <foreach collection="ebays" item="ebay" index="index" open="(" separator="," close=")">
                #{ebay.ebayName}
            </foreach>
        </if>
        group by addmembermessage.messageID
    </select>

</mapper>