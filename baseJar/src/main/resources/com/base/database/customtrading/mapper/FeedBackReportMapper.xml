<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.base.database.customtrading.mapper.FeedBackReportMapper">
  <resultMap id="BaseResultMap" type="com.base.domains.querypojos.FeedBackReportQuery">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <result column="returnType" jdbcType="VARCHAR" property="returnType" />
      <result column="tjNumber" jdbcType="VARCHAR" property="tjNumber" />
  </resultMap>

    <select id="selectFeedBackReportList" resultMap="BaseResultMap" parameterType="map">
        select feed.CommentType returnType,count(*) tjNumber from trading_feedbackdetail feed  where 1=1
        <if test="datetype==1||datetype==2">
            and DATE_FORMAT(feed.CommentTime, '%Y-%m-%d') = #{datestr}
        </if>
        <if test="datetype==3||datetype==4">
            and DATE_FORMAT(feed.CommentTime, '%Y-%m-%d') >= #{startDate} and  #{endDate}>=DATE_FORMAT(feed.CommentTime, '%Y-%m-%d')
        </if>
        <if test="datetype==5||datetype==6">
            and DATE_FORMAT(feed.CommentTime, '%Y-%m') = #{datestr}
        </if>
        <if test="userid!=null">
            and feed.user_id=#{userid}
        </if>
         group by feed.CommentType order by feed.CommentType desc
    </select>
</mapper>