<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.base.database.customtrading.mapper.AutoMessageMapper">
  <resultMap id="BaseResultMap" type="com.base.domains.querypojos.AutoMessageQuery">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
      <id column="id" jdbcType="BIGINT" property="id" />
      <result column="messageTemplate_id" jdbcType="BIGINT" property="messagetemplateId" />
      <result column="subject" jdbcType="VARCHAR" property="subject" />
      <result column="type" jdbcType="VARCHAR" property="type" />
      <result column="ebayEmail" jdbcType="INTEGER" property="ebayemail" />
      <result column="email" jdbcType="INTEGER" property="email" />
      <result column="day" jdbcType="INTEGER" property="day" />
      <result column="hour" jdbcType="INTEGER" property="hour" />
      <result column="create_user" jdbcType="BIGINT" property="createUser" />
      <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
      <result column="uuid" jdbcType="VARCHAR" property="uuid" />
      <result column="item" jdbcType="VARCHAR" property="item" />
      <result column="country" jdbcType="VARCHAR" property="country" />
      <result column="amount" jdbcType="VARCHAR" property="amount" />
      <result column="service" jdbcType="VARCHAR" property="service" />
      <result column="internationalService" jdbcType="VARCHAR" property="internationalService" />
      <result column="exceptCountry" jdbcType="VARCHAR" property="exceptCountry" />
      <result column="allOrder" jdbcType="VARCHAR" property="allOrder" />

  </resultMap>

    <select id="selectAutoMessageList" resultMap="BaseResultMap" parameterType="map">
        select autoMessage.*,item.value item,country.value country,amount.value amount,service.value service,internationalService.value internationalService,allOrder.value allOrder,exceptCountry.value exceptCountry from trading_auto_message autoMessage
        left join trading_auto_message_attr item on (autoMessage.id=item.autoMessage_id and item.type="orderItem")
        left join trading_auto_message_attr country on (autoMessage.id=country.autoMessage_id and country.type="country")
        left join trading_auto_message_attr amount on (autoMessage.id=amount.autoMessage_id and amount.type="amount")
        left join trading_auto_message_attr service on (autoMessage.id=service.autoMessage_id and service.type="service")
        left join trading_auto_message_attr internationalService on (autoMessage.id=internationalService.autoMessage_id and internationalService.type="internationalService")
        left join trading_auto_message_attr allOrder on (autoMessage.id=allOrder.autoMessage_id and allOrder.type="allOrder")
        left join trading_auto_message_attr exceptCountry on (autoMessage.id=exceptCountry.autoMessage_id and exceptCountry.type="exceptCountry")
        where 1=1
        <if test="id!=null">
            and autoMessage.id = #{id}
        </if>
        <if test="userId!=null">
            and autoMessage.create_user =#{userId}
        </if>
        group by autoMessage.id
    </select>
    <select id="selectInternationalShippingServiceList" resultMap="BaseResultMap" parameterType="map">
        select dic.id id,dic.name subject from trading_data_dictionary dic where 1=1
        and dic.type ="International transport"
    </select>
    <select id="selectShippingServiceOptionList" resultMap="BaseResultMap" parameterType="map">
        select dic.id id,dic.name subject from trading_data_dictionary dic where 1=1
        and dic.type ="domestic transportation"
        <if test="siteId!=null">
            and dic.parent_id = #{siteId}
        </if>
    </select>


</mapper>